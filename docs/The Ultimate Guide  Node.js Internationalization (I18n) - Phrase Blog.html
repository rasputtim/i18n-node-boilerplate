<!DOCTYPE html><html
lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta
http-equiv="content-type" content="text/html; charset=UTF-8" /><meta
http-equiv="X-UA-Compatible" content="IE=edge"><meta
name="viewport" content="width=device-width, initial-scale=1"><link
rel="pingback" href="https://phrase.com/blog/xmlrpc.php" /><title>The Ultimate Guide: Node.js Internationalization (I18n) - Phrase Blog</title> <script type="text/javascript">var bhittani_plugin_kksr_js = {"nonce":"bcf5570a51","grs":true,"ajaxurl":"https:\/\/phrase.com\/blog\/wp-admin\/admin-ajax.php","func":"kksr_ajax","msg":"Rate this post","fuelspeed":200,"thankyou":"Thank you for your vote","error_msg":"An error occurred","tooltip":"1","tooltips":[{"tip":"","color":"#ffffff"},{"tip":"","color":"#ffffff"},{"tip":"","color":"#ffffff"},{"tip":"","color":"#ffffff"},{"tip":"","color":"#ffffff"}]};</script>  <script data-cfasync="false" type="text/javascript">//
	var gtm4wp_datalayer_name = "dataLayer";
	var dataLayer = dataLayer || [];//</script> <meta
name="description" content="➽ In this tutorial, we will show you how to setup your Node.js i18n project and how to organise your translations, so as to make your application reachable to a much wider audience ✅ We will highlight ways you can integrate I18n and adapt your Node.js app to different cultural rules and habits in a sensible manner."/><link
rel="canonical" href="https://phrase.com/blog/posts/node-js-i18n-guide/" /><meta
property="og:locale" content="en_US" /><meta
property="og:type" content="article" /><meta
property="og:title" content="The Ultimate Guide: Node.js Internationalization (I18n) - Phrase Blog" /><meta
property="og:description" content="➽ In this tutorial, we will show you how to setup your Node.js i18n project and how to organise your translations, so as to make your application reachable to a much wider audience ✅ We will highlight ways you can integrate I18n and adapt your Node.js app to different cultural rules and habits in a sensible manner." /><meta
property="og:url" content="https://phrase.com/blog/posts/node-js-i18n-guide/" /><meta
property="og:site_name" content="The Phrase (formerly PhraseApp) Blog" /><meta
property="article:tag" content="how to do localization in javascript" /><meta
property="article:tag" content="i18n javascript" /><meta
property="article:tag" content="i18n javascript example" /><meta
property="article:tag" content="i18n support" /><meta
property="article:tag" content="internationalization" /><meta
property="article:tag" content="javascript i18n" /><meta
property="article:tag" content="javascript internationalization" /><meta
property="article:tag" content="javascript localization" /><meta
property="article:tag" content="javascript localization i18n" /><meta
property="article:tag" content="jquery localization" /><meta
property="article:tag" content="JS internationalization" /><meta
property="article:tag" content="json localization" /><meta
property="article:tag" content="localization" /><meta
property="article:tag" content="localization in javascript" /><meta
property="article:tag" content="localization javascript" /><meta
property="article:tag" content="localization js" /><meta
property="article:tag" content="node i18n" /><meta
property="article:tag" content="node.js" /><meta
property="article:tag" content="node.js i18n" /><meta
property="article:tag" content="node.js localization" /><meta
property="article:tag" content="website localization javascript" /><meta
property="article:section" content="Developers" /><meta
property="article:published_time" content="2018-03-08T18:51:38+00:00" /><meta
property="article:modified_time" content="2019-08-21T16:18:42+00:00" /><meta
property="og:updated_time" content="2019-08-21T16:18:42+00:00" /><meta
property="og:image" content="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n.jpg" /><meta
property="og:image:secure_url" content="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n.jpg" /><meta
property="og:image:width" content="1200" /><meta
property="og:image:height" content="811" /><meta
name="twitter:card" content="summary_large_image" /><meta
name="twitter:description" content="➽ In this tutorial, we will show you how to setup your Node.js i18n project and how to organise your translations, so as to make your application reachable to a much wider audience ✅ We will highlight ways you can integrate I18n and adapt your Node.js app to different cultural rules and habits in a sensible manner." /><meta
name="twitter:title" content="The Ultimate Guide: Node.js Internationalization (I18n) - Phrase Blog" /><meta
name="twitter:image" content="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n.jpg" /><meta
name="twitter:creator" content="@nerdokto" /> <script type='application/ld+json'>{"@context":"https:\/\/schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/phrase.com\/blog\/","name":"Blog"}},{"@type":"ListItem","position":2,"item":{"@id":"https:\/\/phrase.com\/blog\/developer\/","name":"Developers"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/phrase.com\/blog\/posts\/node-js-i18n-guide\/","name":"The Ultimate Guide: Node.js Internationalization (I18n)"}}]}</script> <link
rel='dns-prefetch' href='//s0.wp.com' /><link
rel='dns-prefetch' href='//js.hs-scripts.com' /><link
rel='dns-prefetch' href='//s.w.org' /><link
rel="alternate" type="application/rss+xml" title="The Phrase (formerly PhraseApp) Blog &raquo; Feed" href="https://phrase.com/blog/feed/" /><link
rel="alternate" type="application/rss+xml" title="The Phrase (formerly PhraseApp) Blog &raquo; Comments Feed" href="https://phrase.com/blog/comments/feed/" /><link
rel="alternate" type="application/rss+xml" title="The Phrase (formerly PhraseApp) Blog &raquo; The Ultimate Guide: Node.js Internationalization (I18n) Comments Feed" href="https://phrase.com/blog/posts/node-js-i18n-guide/feed/" /> <script type="text/javascript">window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/phrase.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.13"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley, img.emoji { display: inline !important; border: none !important; box-shadow: none !important; height: 1em !important; width: 1em !important; margin: 0 .07em !important; vertical-align: -0.1em !important; background: none !important; padding: 0 !important; }</style><link
rel='stylesheet' id='fvm-header-0-css'  href='//phrase.com/blog/wp-content/uploads/fvm/out/header-00032ba7-1572863800.min.css' type='text/css' media='all' /> <script type='text/javascript'>/*  */
var ajax_tptn_tracker = {"ajax_url":"https:\/\/phrase.com\/blog\/","top_ten_id":"3491","top_ten_blog_id":"1","activate_counter":"11","tptn_rnd":"146591616"};
/*  */</script> <script type="text/javascript" src="//phrase.com/blog/wp-content/uploads/fvm/out/header-7d851a8a-1572863800.min.js" defer></script><link
rel='https://api.w.org/' href='https://phrase.com/blog/wp-json/' /><link
rel="EditURI" type="application/rsd+xml" title="RSD" href="https://phrase.com/blog/xmlrpc.php?rsd" /><link
rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://phrase.com/blog/wp-includes/wlwmanifest.xml" /><meta
name="generator" content="WordPress 4.9.13" /><link
rel='shortlink' href='https://wp.me/p83jFV-Uj' /><link
rel="alternate" type="application/json+oembed" href="https://phrase.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fphrase.com%2Fblog%2Fposts%2Fnode-js-i18n-guide%2F" /><link
rel="alternate" type="text/xml+oembed" href="https://phrase.com/blog/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fphrase.com%2Fblog%2Fposts%2Fnode-js-i18n-guide%2F&#038;format=xml" /><style>.kk-star-ratings { width:120px; }.kk-star-ratings .kksr-stars a { width:24px; }.kk-star-ratings .kksr-stars, .kk-star-ratings .kksr-stars .kksr-fuel, .kk-star-ratings .kksr-stars a { height:24px; }.kk-star-ratings .kksr-star.gray { background-image: url(https://phraseapp.com/blog/ic_star_grey/); }.kk-star-ratings .kksr-star.yellow { background-image: url(https://phraseapp.com/blog/ic_star_blue/); }.kk-star-ratings .kksr-star.orange { background-image: url(https://phraseapp.com/blog/ic_star_green/); }</style><style type="text/css">0</style> <script data-cfasync="false" type="text/javascript">//
	dataLayer.push({"pagePostType":"post","pagePostType2":"single-post","pageCategory":["developer"],"pageAttributes":["how-to-do-localization-in-javascript","i18n-javascript","i18n-javascript-example","i18n-support","internationalization","javascript-i18n","javascript-internationalization","javascript-localization","javascript-localization-i18n","jquery-localization","js-internationalization","json-localization","localization","localization-in-javascript","localization-javascript","localization-js","node-i18n","node-js","node-js-i18n","node-js-localization","website-localization-javascript"],"pagePostAuthor":"Theo Despoudis"});//</script> <script data-cfasync="false">//
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.'+'js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K85N4R');//</script>    <script type="text/javascript">var _hsq = _hsq || [];
				_hsq.push(["setContentType", "blog-post"]);</script> <link
rel='dns-prefetch' href='//v0.wordpress.com'/><style type='text/css'>img#wpstats{display:none}</style></head><body
class="post-template-default single single-post postid-3491 single-format-standard js-disabled" data-spy="scroll" data-target="#sidebar-affix"> <script type="application/javascript">// Replace `js-disabled` class with `js-enabled`
    // This will only work, if js is enabled, this way we can determine if js is enabled or not.
    let body = document.getElementsByTagName('body')[0];
    body.classList.remove('js-disabled');
    body.classList.add('js-enabled');</script> <nav
class="navbar navbar-expand-lg navbar-dark bg-primary justify-content-between" id="navigation"><div
class="container"> <a
class="navbar-brand" href="https://phrase.com"> <img
class="navbar-brand-logo" alt="Phrase" src="https://phrase.com/blog/wp-content/themes/wp-phraseapp-theme-2.5.40/dist/images/phrase-logo.7df9e8101ccc0f30673016f663e47910.svg" /> </a><button
class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span
class="navbar-toggler-icon"></span> </button><div
class="collapse navbar-collapse" id="navbarSupportedContent"><ul
id="menu-main-menu" class="navbar-nav"><li
id="menu-item-4554" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4554 nav-item"><a
href="https://phrase.com/blog" class="nav-link">All Articles</a></li><li
id="menu-item-4557" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4557 nav-item"><a
href="https://phrase.com/blog/product-manager/" class="nav-link">Product Managers</a></li><li
id="menu-item-4558" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-4558 nav-item"><a
href="https://phrase.com/blog/developer/" class="nav-link">Developers</a></li><li
id="menu-item-4559" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-4559 nav-item"><a
href="https://phrase.com/blog/news/" class="nav-link">News</a></li><li
id="menu-item-4555" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4555 nav-item"><a
href="https://phrase.com/blog/authors/" class="nav-link">Authors</a></li><li
id="menu-item-4556" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4556 nav-item"><a
href="https://phrase.com/blog/about/" class="nav-link">About</a></li></ul><form
id="search-form" class="form-inline flex-nowrap justify-content-end input-group navbar-form" role="search" method="get" action="https://phrase.com/blog/"><div
class="input-group rounded"> <input
id="search-input" class="form-control search-input" type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search for..." aria-label="Search" name="s"><div
class="input-group-append"> <button
class="btn search-trigger" id="search-trigger" type="button"> <i
class="material-icons">search</i> </button></div></div></form></div></div> </nav> <article
id="post-3491" class="post-3491 post type-post status-publish format-standard has-post-thumbnail hentry category-developer tag-how-to-do-localization-in-javascript tag-i18n-javascript tag-i18n-javascript-example tag-i18n-support tag-internationalization tag-javascript-i18n tag-javascript-internationalization tag-javascript-localization tag-javascript-localization-i18n tag-jquery-localization tag-js-internationalization tag-json-localization tag-localization tag-localization-in-javascript tag-localization-javascript tag-localization-js tag-node-i18n tag-node-js tag-node-js-i18n tag-node-js-localization tag-website-localization-javascript" itemid="https://phrase.com/blog/posts/node-js-i18n-guide/" itemscope itemtype="http://schema.org/BlogPosting"><meta
itemprop="mainEntityOfPage" content="https://phrase.com"><div
itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta
itemprop="name" content="Phrase" /><div
itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><meta
itemprop="url" content="http://phrase.com/blog/wp-content/uploads/2016/04/logo_squared@3x.png" /></div></div><header
class="hero-header-wrapper hero-has-image"><div
class="container-fluid px-0 entry-header hero-title-wrapper"><div
class="container"><div
class="row justify-content-center"><div
class="col-md-8"><h1 class="entry-title hero-title" itemprop="headline">The Ultimate Guide: Node.js Internationalization (I18n)</h1></div></div></div></div><div
class="container"><div
class="row justify-content-center entry-image-wrapper hero-image-wrapper"><div
class="col-12 col-md-10" itemprop="image" itemscope itemtype="http://schema.org/ImageObject"> <img
width="768" height="519" src="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-768x519.jpg" class="entry-image hero-image rounded wp-post-image" alt="" itemprop="url" srcset="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-768x519.jpg 768w, https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-300x203.jpg 300w, https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-1024x692.jpg 1024w, https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-16x11.jpg 16w, https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-291x196.jpg 291w, https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n.jpg 1200w" sizes="(max-width: 768px) 100vw, 768px" /><meta
itemprop="url" content="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n.jpg" /><meta
itemprop="width" content="1200" /><meta
itemprop="height" content="811" /></div></div><div
class="row justify-content-center entry-intro-wrapper hero-intro-wrapper"><div
class="col-12 col-md-10 entry-intro hero-intro"><p
itemprop="about"> If you are a serious Node.js Software Engineer that creates web applications with Express, Koa or any similar framework, you will need to be able to Internationalise your app in order to support different locales. In this tutorial we will see you how to setup I18n in Node.js and how to organise your translations, so to make your application reachable to a much wider audience.</p></div></div></div> </header><div
class="container"><div
class="row"><div
class="col-12 breadcrumbs-wrapper"> <nav
class="breadcrumbs" aria-label="breadcrumb"><ol
class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li
class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a
href="https://phrase.com/blog/" itemprop="item"> <span
itemprop="name"> Home </span> </a><meta
itemprop="position" content="1" /><meta
itemprop="url" content="https://phrase.com/blog/" /></li><li
class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a
href="https://phrase.com/blog/" itemprop="item"> <span
itemprop="name"> Blog </span> </a><meta
itemprop="position" content="2" /><meta
itemprop="url" content="https://phrase.com/blog/" /></li><li
class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <a
href="https://phrase.com/blog/developer/" itemprop="item"> <span
itemprop="name"> Developers </span> </a><meta
itemprop="position" content="3" /><meta
itemprop="url" content="https://phrase.com/blog/developer/" /></li><li
class="breadcrumb-item active" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"> <span
itemprop="name"> The Ultimate Guide: Node.js Internationalization (I18n) </span><meta
itemprop="position" content="4" /><meta
itemprop="url" content="https://phrase.com/blog/posts/node-js-i18n-guide/" /></li></ol> </nav></div></div><div
class="row"><div
class="col-md-8 entry-content-wrapper"><div
class="entry-content" itemprop="articleBody"><p><strong>Node.js</strong> is an asynchronous event-driven JavaScript runtime and is designed to help build scalable network applications. In essence, it allows Javascript to run in the backend as server-side code.</p><p>The Node ecosystem is vast and it relies on community projects. Although there are numerous tutorials online exploring Node.js and its libraries, the topic of I18n is almost left behind.</p><p>So when you have the need for scalable I18n solutions that are easy to use and implement, it pays to make some sensible software architecture demissions upfront.</p><p>This article is about trying to fill that big gap; by showing ways you can integrate I18n and adapting to different cultural rules and habits in your Node.js applications in a sensible manner.</p><p>For the purposes of this tutorial, I will be using the latest <strong>Node.js LTS</strong> runtime <strong>v8.94 </strong>and the code for this tutorial is hosted on <a
href="https://github.com/theodesp/phrase-app-nodejs-i18n" class="external" rel="nofollow" target="_blank">Github</a>. For convenience, we are going to use the <em><strong>&#8211;experimental-modules</strong></em> flag in order to use es6 imports in code. You can achieve the same result using <a
href="https://babeljs.io/" class="external" rel="nofollow" target="_blank">babel</a> with <a
href="https://www.npmjs.com/package/babel-preset-es2015" class="external" rel="nofollow" target="_blank">preset-es2015</a>.</p><p>Let&#8217;s get started.</p><h2>Setting up the Project</h2><p>The <a
href="https://nodejs.org/api/index.html" class="external" rel="nofollow" target="_blank">Node.js runtime library</a> is providing only the basic low-level primitives in order to write server applications. So in order to start with i18n, we have to start from scratch. That&#8217;s partly good because it allows us to have total control over the design decisions that may affect our project scope.</p><h3>Initiate a new Node.js app</h3><p>For the purposes of this tutorial, I&#8217;ve taken a lot of inspiration from this <a
href="https://github.com/talyssonoc/node-api-boilerplate" class="external" rel="nofollow" target="_blank">node API boilerplate</a> where you start with a good yet opinionated base project for your Node.js applications.</p><p>Create the initial folder structure.</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91371044034430" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ mkdir node-i18n-example &amp;&amp; cd node-i18n-example
$ npm init --yes</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91371044034430-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91371044034430-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91371044034430-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">mkdir </span><span
class="crayon-v">node</span><span
class="crayon-o">-</span><span
class="crayon-v">i18n</span><span
class="crayon-o">-</span><span
class="crayon-v">example</span><span
class="crayon-h"> </span><span
class="crayon-o">&amp;&amp;</span><span
class="crayon-h"> </span><span
class="crayon-i">cd</span> <span
class="crayon-v">node</span><span
class="crayon-o">-</span><span
class="crayon-v">i18n</span><span
class="crayon-o">-</span><span
class="crayon-i">example</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91371044034430-2"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">npm </span><span
class="crayon-v">init</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">yes</span></div></div></td></tr></table></div></div><p></p><h3>Create a Locale Service</h3><p>We need to have a service that will handle any i18n calls and will work as a mediator for any underlying i18n library we may use or may not use.</p><p>1. Create the service folder:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91379503000977" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ mkdir -p app/services &amp;&amp; cd app/services</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91379503000977-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91379503000977-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-v">mkdir</span><span
class="crayon-h"> </span><span
class="crayon-o">-</span><span
class="crayon-i">p</span><span
class="crayon-h"> </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">services</span><span
class="crayon-h"> </span><span
class="crayon-o">&amp;&amp;</span><span
class="crayon-h"> </span><span
class="crayon-e">cd </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">services</span></div></div></td></tr></table></div></div><p>2. Add the file contents with your favorite editor:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9137a975286650" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch localeService.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9137a975286650-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9137a975286650-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">touch </span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-v">mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/services/localeService.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9137c281389995" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
/**
 * LocaleService
 */
export class LocaleService {
  /**
   *
   * @param i18nProvider The i18n provider
   */
  constructor(i18nProvider) {
    this.i18nProvider = i18nProvider;
  }

  /**
   *
   * @returns {string} The current locale code
   */
  getCurrentLocale() {
    return this.i18nProvider.getLocale();
  }

  /**
   *
   * @returns string[] The list of available locale codes
   */
  getLocales() {
    return this.i18nProvider.getLocales();
  }

  /**
   *
   * @param locale The locale to set. Must be from the list of available locales.
   */
  setLocale(locale) {
    if (this.getLocales().indexOf(locale) !== -1) {
      this.i18nProvider.setLocale(locale)
    }
  }

  /**
   *
   * @param string String to translate
   * @param args Extra parameters
   * @returns {string} Translated string
   */
  translate(string, args = undefined) {
    return this.i18nProvider.translate(string, args)
  }

  /**
   *
   * @param phrase Object to translate
   * @param count The plural number
   * @returns {string} Translated string
   */
  translatePlurals(phrase, count) {
    return this.i18nProvider.translateN(phrase, count)
  }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-15">15</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-16">16</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-17">17</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-18">18</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-19">19</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-20">20</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-21">21</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-22">22</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-23">23</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-24">24</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-25">25</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-26">26</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-27">27</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-28">28</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-29">29</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-30">30</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-31">31</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-32">32</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-33">33</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-34">34</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-35">35</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-36">36</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-37">37</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-38">38</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-39">39</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-40">40</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-41">41</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-42">42</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-43">43</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-44">44</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-45">45</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-46">46</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-47">47</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-48">48</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-49">49</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-50">50</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-51">51</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-52">52</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-53">53</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-54">54</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-55">55</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-56">56</div><div
class="crayon-num" data-line="crayon-5e0935bb9137c281389995-57">57</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9137c281389995-58">58</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-1"><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-2"><span
class="crayon-c"> * LocaleService</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-3"><span
class="crayon-c"> */</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-4"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">LocaleService</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-6"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-7"><span
class="crayon-c">&nbsp;&nbsp; * @param i18nProvider The i18n provider</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-8"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-11"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-12">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-13"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-14"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-15"><span
class="crayon-c">&nbsp;&nbsp; * @returns {string} The current locale code</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-16"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-17"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">getCurrentLocale</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-18"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">getLocale</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-19"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-20">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-21"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-22"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-23"><span
class="crayon-c">&nbsp;&nbsp; * @returns string[] The list of available locale codes</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-24"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-25"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">getLocales</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-26"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">getLocales</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-27"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-28">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-29"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-30"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-31"><span
class="crayon-c">&nbsp;&nbsp; * @param locale The locale to set. Must be from the list of available locales.</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-32"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-33"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">setLocale</span><span
class="crayon-sy">(</span><span
class="crayon-v">locale</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-34"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">if</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-e">getLocales</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">.</span><span
class="crayon-e">indexOf</span><span
class="crayon-sy">(</span><span
class="crayon-v">locale</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">!==</span><span
class="crayon-h"> </span><span
class="crayon-o">-</span><span
class="crayon-cn">1</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-35"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">setLocale</span><span
class="crayon-sy">(</span><span
class="crayon-v">locale</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-36"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-37"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-38">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-39"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-40"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-41"><span
class="crayon-c">&nbsp;&nbsp; * @param string String to translate</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-42"><span
class="crayon-c">&nbsp;&nbsp; * @param args Extra parameters</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-43"><span
class="crayon-c">&nbsp;&nbsp; * @returns {string} Translated string</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-44"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-45"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">translate</span><span
class="crayon-sy">(</span><span
class="crayon-t">string</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">args</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">undefined</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-46"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">translate</span><span
class="crayon-sy">(</span><span
class="crayon-t">string</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">args</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-47"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-48">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-49"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-50"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-51"><span
class="crayon-c">&nbsp;&nbsp; * @param phrase Object to translate</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-52"><span
class="crayon-c">&nbsp;&nbsp; * @param count The plural number</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-53"><span
class="crayon-c">&nbsp;&nbsp; * @returns {string} Translated string</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-54"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-55"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">translatePlurals</span><span
class="crayon-sy">(</span><span
class="crayon-v">phrase</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">count</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-56"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">translateN</span><span
class="crayon-sy">(</span><span
class="crayon-v">phrase</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">count</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb9137c281389995-57"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9137c281389995-58"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>The<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb9137d057946332" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">LocaleService</span></span></span>  is a simple class that accepts an<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb9137f917866988" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">i18nProvider</span></span></span>  object that will help make working with locales a little bit easier. We might have a little bit more flexibility that way as we may decide to switch our provider without breaking much or our API calls.</p><p>Now what&#8217;s missing is the actual i18n provider. Let&#8217;s add one.</p><h2>Adding an I18n provider</h2><p>While there are a few reasonable choices when it comes to I18n, the most popular library at the moment is <a
href="https://github.com/mashpie/i18n-node" class="external" rel="nofollow" target="_blank">i18n-node.</a></p><p>The installation is pretty forward:</p><p>1. Install the package</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91380568521985" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ npm install i18n --save</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91380568521985-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91380568521985-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">npm </span><span
class="crayon-e">install </span><span
class="crayon-v">i18n</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">save</span></div></div></td></tr></table></div></div><p>2. Create a i18n config object because before we use the library we need to configure it:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91381278768693" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch app/i18n.config.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91381278768693-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91381278768693-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">touch </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">i18n</span><span
class="crayon-sy">.</span><span
class="crayon-v">config</span><span
class="crayon-sy">.</span><span
class="crayon-v">mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/i18n.config.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91383125843133" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import i18n from 'i18n';
import path from 'path';

i18n.configure({
  locales: ['en', 'el'],
  defaultLocale: 'en',
  queryParameter: 'lang',
  directory: path.join('./', 'locales'),
  api: {
    '__': 'translate',  
    '__n': 'translateN' 
  },
});

export default i18n;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91383125843133-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb91383125843133-15">15</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91383125843133-1"><span
class="crayon-e">import </span><span
class="crayon-e">i18n </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'i18n'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-2"><span
class="crayon-e">import </span><span
class="crayon-e">path </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'path'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-4"><span
class="crayon-v">i18n</span><span
class="crayon-e">.configure</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">locales</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">[</span><span
class="crayon-s">'en'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'el'</span><span
class="crayon-sy">]</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">defaultLocale</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'en'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-7"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">queryParameter</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'lang'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-8"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">directory</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">path</span><span
class="crayon-e">.join</span><span
class="crayon-sy">(</span><span
class="crayon-s">'./'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'locales'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">api</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'__'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'translate'</span><span
class="crayon-sy">,</span><span
class="crayon-h">&nbsp;&nbsp;</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-11"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'__n'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'translateN'</span><span
class="crayon-h"> </span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-12"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-13"><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91383125843133-14">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb91383125843133-15"><span
class="crayon-e">export </span><span
class="crayon-st">default</span><span
class="crayon-h"> </span><span
class="crayon-v">i18n</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>Here we added support for 2 languages with the default one being <strong>en. </strong>We also defined a locale <strong>directory </strong>that will be used by the library for autogenerating the initial translation files and strings. The <strong>API</strong> property is just a mapping from the <strong>__</strong> call to <strong>translate </strong>call in our<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb91384405957803" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localeService</span></span></span> . If you don&#8217;t want that arrangement you can change the call from<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb91385057071636" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">translate</span><span
class="crayon-sy">(</span><span
class="crayon-t">string</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">args</span><span
class="crayon-sy">)</span></span></span>  to<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb91387747539529" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-t">string</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">args</span><span
class="crayon-sy">)</span></span></span> .</p><p><strong>Tip:</strong> Look at the whole list of config options for that library <a
href="https://github.com/mashpie/i18n-node#list-of-all-configuration-options" class="external" rel="nofollow" target="_blank">here</a>.</p><p>3. Test the Locale Service by instantiating an i18n object and a localeService:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91388066188162" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch index.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91388066188162-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91388066188162-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">touch </span><span
class="crayon-v">index</span><span
class="crayon-sy">.</span><span
class="crayon-v">mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>index.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91389408390691" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import { LocaleService } from './app/services/localeService.mjs';
import i18n from './app/i18n.config.mjs';

const localeService = new LocaleService(i18n);

console.log(localeService.getLocales()); // ['en', 'el']
console.log(localeService.getCurrentLocale()); // 'en'
console.log(localeService.translate('Hello')); //  'Hello'
console.log(localeService.translatePlurals('You have %s message', 3)); // 'You have 3 messages'</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91389408390691-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91389408390691-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91389408390691-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91389408390691-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb91389408390691-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91389408390691-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb91389408390691-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91389408390691-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb91389408390691-9">9</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91389408390691-1"><span
class="crayon-e">import</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">LocaleService</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./app/services/localeService.mjs'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91389408390691-2"><span
class="crayon-e">import </span><span
class="crayon-e">i18n </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./app/i18n.config.mjs'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb91389408390691-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91389408390691-4"><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">localeService</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-r">new</span><span
class="crayon-h"> </span><span
class="crayon-e">LocaleService</span><span
class="crayon-sy">(</span><span
class="crayon-v">i18n</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb91389408390691-5">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91389408390691-6"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">getLocales</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// ['en', 'el']</span></div><div
class="crayon-line" id="crayon-5e0935bb91389408390691-7"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">getCurrentLocale</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// 'en'</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91389408390691-8"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">translate</span><span
class="crayon-sy">(</span><span
class="crayon-s">'Hello'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">//&nbsp;&nbsp;'Hello'</span></div><div
class="crayon-line" id="crayon-5e0935bb91389408390691-9"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">translatePlurals</span><span
class="crayon-sy">(</span><span
class="crayon-s">'You have %s message'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">3</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// 'You have 3 messages'</span></div></div></td></tr></table></div></div><p>Then in the command line run the following:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9138a764362016" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ node --experimental-modules index.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9138a764362016-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9138a764362016-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-i">node</span> <span
class="crayon-o">--</span><span
class="crayon-v">experimental</span><span
class="crayon-o">-</span><span
class="crayon-e">modules </span><span
class="crayon-v">index</span><span
class="crayon-e">.mjs</span></div></div></td></tr></table></div></div><p>This will automatically generate a <em><strong>locales</strong></em> directory on the root folder containing the relevant translation strings for the current language:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9138c134442988" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ tree locales 
locales
├── el.json
└── en.json</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9138c134442988-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9138c134442988-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9138c134442988-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9138c134442988-4">4</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9138c134442988-1"><span
class="crayon-sy">$</span> <span
class="crayon-e">tree </span><span
class="crayon-e">locales </span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9138c134442988-2"><span
class="crayon-i">locales</span></div><div
class="crayon-line" id="crayon-5e0935bb9138c134442988-3">├──<span
class="crayon-h"> </span><span
class="crayon-v">el</span><span
class="crayon-e">.json</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9138c134442988-4">└──<span
class="crayon-h"> </span><span
class="crayon-v">en</span><span
class="crayon-e">.json</span></div></div></td></tr></table></div></div><p><em>File: <strong>locales/en.json</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9138d005083158" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
{
   "Hello": "Hello",
   "You have %s message": {
      "one": "You have %s message",
      "other": "You have %s messages"
   }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9138d005083158-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9138d005083158-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9138d005083158-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9138d005083158-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb9138d005083158-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9138d005083158-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb9138d005083158-7">7</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9138d005083158-1"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9138d005083158-2"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"Hello"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Hello"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb9138d005083158-3"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"You have %s message"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9138d005083158-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"one"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"You have %s message"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb9138d005083158-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"other"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"You have %s messages"</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9138d005083158-6"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb9138d005083158-7"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>Add the following line in <strong><em>index.mjs</em></strong> to test the generation of translatable strings for the other language:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9138e514146611" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
localeService.setLocale('el');</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9138e514146611-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9138e514146611-1"><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">setLocale</span><span
class="crayon-sy">(</span><span
class="crayon-s">'el'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p><em>File: <strong>locales/el.json</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91390257292373" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
{
   "Hello": "Για Σας",
   "You have %s message": {
      "one": "Έχεις %s μύνημα",
      "other": "Έχεις %s μύνηματα"
   }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91390257292373-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91390257292373-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91390257292373-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91390257292373-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb91390257292373-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91390257292373-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb91390257292373-7">7</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91390257292373-1"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91390257292373-2"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"Hello"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Για Σας"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb91390257292373-3"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"You have %s message"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91390257292373-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"one"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Έχεις %s μύνημα"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb91390257292373-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"other"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Έχεις %s μύνηματα"</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91390257292373-6"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb91390257292373-7"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>Run again the app and to verify that the translations are happening:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91391096840687" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ node --experimental-modules index.mjs
Για Σας
Έχεις 3 μύνηματα</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91391096840687-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91391096840687-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91391096840687-3">3</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91391096840687-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-v">node</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">experimental</span><span
class="crayon-o">-</span><span
class="crayon-e">modules </span><span
class="crayon-v">index</span><span
class="crayon-e">.mjs</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91391096840687-2">Για<span
class="crayon-h"> </span>Σας</div><div
class="crayon-line" id="crayon-5e0935bb91391096840687-3">Έχεις<span
class="crayon-h"> </span><span
class="crayon-cn">3</span><span
class="crayon-h"> </span>μύνηματα</div></div></td></tr></table></div></div><p></p><h2>Wire everything up with a DI container</h2><p>Currently, in order to use our<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb91392593901960" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localeService</span></span></span>  class, we have to manually instantiate it and pass on the i18n config object. What&#8217;s even worse is that we need to keep only one reference to this object as we need to keep the current locale state in one place.</p><p>Would it be nice if we had a way to configure and retrieve on demand our localeService instance whenever in our application requests it? Would it be even nicer than any parameters also that needed to be provided at creation time be resolved also?</p><p>It turns out that there is a way to do that with the help of a <strong>Dependency Inversion Container</strong>. This is just an object that exposes a top-level API that allows us to register our valuable objects or services and request them in another time and place. This Dependency Inversion Container is one form of <a
href="https://en.wikipedia.org/wiki/Inversion_of_control" class="external" rel="nofollow" target="_blank">inversion of control</a> (IoC) and helps with reusability, testability and better control.</p><p>For Node.js there is a nice library called <a
href="https://github.com/jeffijoe/awilix#author" class="external" rel="nofollow" target="_blank">awilix</a> that offers those features. Let&#8217;s see how can we integrate this library for the sake of a better application structure.</p><p>1. Install awilix</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91394460606602" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ npm install awilix --save</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91394460606602-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91394460606602-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">npm </span><span
class="crayon-e">install </span><span
class="crayon-v">awilix</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">save</span></div></div></td></tr></table></div></div><p>2. Create a file named <em>container.mjs</em> that will keep track of all the service registrations that we will need.</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91395748552757" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch app/container.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91395748552757-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91395748552757-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-r">touch</span><span
class="crayon-h"> </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">container</span><span
class="crayon-e">.mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/container.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91396026307142" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import awilix from 'awilix';
import i18n from './i18n.config';
import { LocaleService } from './services/localeService.mjs';

const container = awilix.createContainer();

container
  .register({
    localeService: awilix.asClass(LocaleService, { lifetime: awilix.Lifetime.SINGLETON })
  })
  .register({
    i18nProvider: awilix.asValue(i18n)
  });

export default container;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91396026307142-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb91396026307142-15">15</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91396026307142-1"><span
class="crayon-e">import </span><span
class="crayon-e">awilix </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'awilix'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-2"><span
class="crayon-e">import </span><span
class="crayon-e">i18n </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./i18n.config'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-3"><span
class="crayon-e">import</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">LocaleService</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./services/localeService.mjs'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-4">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-5"><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">container</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-e">createContainer</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-6">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-7"><span
class="crayon-i">container</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-8"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-e">register</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">localeService</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-e">asClass</span><span
class="crayon-sy">(</span><span
class="crayon-v">LocaleService</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-v">lifetime</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-v">Lifetime</span><span
class="crayon-sy">.</span><span
class="crayon-i">SINGLETON</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-10"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-11"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-e">register</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-12"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-e">asValue</span><span
class="crayon-sy">(</span><span
class="crayon-v">i18n</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-13"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91396026307142-14">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb91396026307142-15"><span
class="crayon-e">export </span><span
class="crayon-st">default</span><span
class="crayon-h"> </span><span
class="crayon-v">container</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>As you can see we have a greater flexibility on how we want our objects to be instantiated. For this example we want the <em>LocaleService </em>class to be a <a
href="https://en.wikipedia.org/wiki/Singleton_pattern" class="external" rel="nofollow" target="_blank">singleton</a> object and the <em>i18n config</em> to be just a value because we have just configure it. There are more options for lifetime management in the <a
href="https://github.com/jeffijoe/awilix#lifetime-management" class="external" rel="nofollow" target="_blank">awilix documentation</a>.</p><p>Let&#8217;s hook our LocaleService and our i18n config together at the constructor so every time we resolve the everything is set up for us:</p><p>1. Modify the constructor of the <em>LocaleService</em> class to accept an<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb91398631445580" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">i18nProvider</span></span></span>  object:</p><p>File: <em><strong>app/services/localeService.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb91399461932385" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
/**
 * LocaleService
 */
export class LocaleService {
  /**
   *
   * @param i18nProvider The i18n provider
   */
  constructor(opts) {
    this.i18nProvider = opts.i18nProvider;
  }
...</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb91399461932385-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb91399461932385-12">12</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb91399461932385-1"><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-2"><span
class="crayon-c"> * LocaleService</span></div><div
class="crayon-line" id="crayon-5e0935bb91399461932385-3"><span
class="crayon-c"> */</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-4"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">LocaleService</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb91399461932385-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-6"><span
class="crayon-c">&nbsp;&nbsp; *</span></div><div
class="crayon-line" id="crayon-5e0935bb91399461932385-7"><span
class="crayon-c">&nbsp;&nbsp; * @param i18nProvider The i18n provider</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-8"><span
class="crayon-c">&nbsp;&nbsp; */</span></div><div
class="crayon-line" id="crayon-5e0935bb91399461932385-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-v">opts</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">opts</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb91399461932385-11"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb91399461932385-12"><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span></div></div></td></tr></table></div></div><p>2. Test the resolution of our service by replacing the calls in the <em>index.mjs</em> file with the ones using the container.</p><p><em>File: <strong>index.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9139a945937918" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import container from './app/container';
const localeService = container.resolve('localeService');

localeService.getLocales(); // ['en', 'el']
localeService.getCurrentLocale(); // 'en'
localeService.setLocale('el');
console.log(localeService.translate('Hello'));
console.log(localeService.translatePlurals('You have %s message', 3));</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9139a945937918-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139a945937918-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9139a945937918-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139a945937918-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb9139a945937918-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139a945937918-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb9139a945937918-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139a945937918-8">8</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9139a945937918-1"><span
class="crayon-e">import </span><span
class="crayon-e">container </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./app/container'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139a945937918-2"><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">localeService</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">container</span><span
class="crayon-sy">.</span><span
class="crayon-e">resolve</span><span
class="crayon-sy">(</span><span
class="crayon-s">'localeService'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb9139a945937918-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139a945937918-4"><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">getLocales</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// ['en', 'el']</span></div><div
class="crayon-line" id="crayon-5e0935bb9139a945937918-5"><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">getCurrentLocale</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span><span
class="crayon-h"> </span><span
class="crayon-c">// 'en'</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139a945937918-6"><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">setLocale</span><span
class="crayon-sy">(</span><span
class="crayon-s">'el'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb9139a945937918-7"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">translate</span><span
class="crayon-sy">(</span><span
class="crayon-s">'Hello'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139a945937918-8"><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">log</span><span
class="crayon-sy">(</span><span
class="crayon-v">localeService</span><span
class="crayon-sy">.</span><span
class="crayon-e">translatePlurals</span><span
class="crayon-sy">(</span><span
class="crayon-s">'You have %s message'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-cn">3</span><span
class="crayon-sy">)</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9139b149507261" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ node --experimental-modules index.mjs
Για Σας
Έχεις 3 μύνηματα</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9139b149507261-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139b149507261-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9139b149507261-3">3</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9139b149507261-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-v">node</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">experimental</span><span
class="crayon-o">-</span><span
class="crayon-e">modules </span><span
class="crayon-v">index</span><span
class="crayon-e">.mjs</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139b149507261-2">Για<span
class="crayon-h"> </span>Σας</div><div
class="crayon-line" id="crayon-5e0935bb9139b149507261-3">Έχεις<span
class="crayon-h"> </span><span
class="crayon-cn">3</span><span
class="crayon-h"> </span>μύνηματα</div></div></td></tr></table></div></div><p><strong>Tip:</strong> You can choose to name your resolved service as you like. For this example, we maintained the same name for readability.</p><h2>Example with Express.js and Mustache.js</h2><p>Let&#8217;s see how can we utilize what we have in an example application using <a
href="https://expressjs.com/" class="external" rel="nofollow" target="_blank">Express.js</a>. <em>Express.js</em> is a small but powerful Web Framework for Node.js that allows you to create a robust set of features for web and mobile applications.</p><p>Before we install <em>Express.js</em> though we need to add a few more abstractions on our app in order to accommodate this change.</p><p>We need an <strong>App</strong> class that will accept a <strong>Server</strong> class object.  The App class will know only how to use the server object to start the Application Server and the Server object will know how to start our <em>Express.js</em> application.</p><h3>Adding Express.js</h3><p>1. Create an <em>application.mjs</em> file and add a constructor accepting a server object:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9139d703982235" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch app/application.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9139d703982235-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9139d703982235-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-r">touch</span><span
class="crayon-h"> </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">application</span><span
class="crayon-e">.mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/application.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9139e897447509" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
export class Application {
  constructor({ server }) {
    this.server = server;
  }

  async start() {
    await this.server.start();
  }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9139e897447509-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139e897447509-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9139e897447509-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139e897447509-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb9139e897447509-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139e897447509-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb9139e897447509-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139e897447509-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb9139e897447509-9">9</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9139e897447509-1"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">Application</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139e897447509-2"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">server</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb9139e897447509-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">server</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">server</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139e897447509-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb9139e897447509-5">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139e897447509-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">async </span><span
class="crayon-e">start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb9139e897447509-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">await </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">server</span><span
class="crayon-sy">.</span><span
class="crayon-e">start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139e897447509-8"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb9139e897447509-9"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>We want the server to start async mode as we need to perform additional tasks when this is resolved</p><p>2. Add our <strong>Application</strong> class to the resolution container:</p><p><em>File: <strong>app/container.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb9139f586584140" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import { Application } from './application.mjs';

container
  .register({
    app: awilix.asClass(Application, { lifetime: awilix.Lifetime.SINGLETON })
  })</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb9139f586584140-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139f586584140-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb9139f586584140-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139f586584140-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb9139f586584140-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb9139f586584140-6">6</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb9139f586584140-1"><span
class="crayon-e">import</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">Application</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./application.mjs'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139f586584140-2">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb9139f586584140-3"><span
class="crayon-i">container</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139f586584140-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-e">register</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb9139f586584140-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">app</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-e">asClass</span><span
class="crayon-sy">(</span><span
class="crayon-v">Application</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-v">lifetime</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-v">Lifetime</span><span
class="crayon-sy">.</span><span
class="crayon-i">SINGLETON</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb9139f586584140-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p>3. Install Express.js</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a1619367237" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ npm install express --save</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a1619367237-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a1619367237-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">npm </span><span
class="crayon-e">install </span><span
class="crayon-v">express</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">save</span></div></div></td></tr></table></div></div><p>4 Create a file named <em>server.mjs</em> that contain our initialization logic:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a2266982429" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch app/server.mjs</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a2266982429-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a2266982429-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">touch </span><span
class="crayon-v">app</span><span
class="crayon-o">/</span><span
class="crayon-v">server</span><span
class="crayon-sy">.</span><span
class="crayon-v">mjs</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/server.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a3732709233" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import express from 'express';

export class Server {
  constructor() {
    this.express = express();
    this.express.disable('x-powered-by');
  }

  start() {
    return new Promise((resolve) =&gt; {
      const http = this.express.listen(8000, () =&gt; {
        const { port } = http.address();
        console.info(`[p ${process.pid}] Listening at port ${port}`);
        resolve();
      });
    });
  }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-15">15</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-16">16</div><div
class="crayon-num" data-line="crayon-5e0935bb913a3732709233-17">17</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a3732709233-18">18</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-1"><span
class="crayon-e">import </span><span
class="crayon-e">express </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'express'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-2">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-3"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">Server</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">express</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">disable</span><span
class="crayon-sy">(</span><span
class="crayon-s">'x-powered-by'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-7"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-8">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">new</span><span
class="crayon-h"> </span><span
class="crayon-e">Promise</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">resolve</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-11"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">http</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">listen</span><span
class="crayon-sy">(</span><span
class="crayon-cn">8000</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-12"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">port</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">http</span><span
class="crayon-sy">.</span><span
class="crayon-e">address</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-13"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">info</span><span
class="crayon-sy">(</span><span
class="crayon-sy">`</span><span
class="crayon-sy">[</span><span
class="crayon-e">p</span><span
class="crayon-h"> </span><span
class="crayon-sy">$</span><span
class="crayon-sy">{</span><span
class="crayon-v">process</span><span
class="crayon-sy">.</span><span
class="crayon-v">pid</span><span
class="crayon-sy">}</span><span
class="crayon-sy">]</span><span
class="crayon-h"> </span><span
class="crayon-e">Listening</span><span
class="crayon-h"> </span><span
class="crayon-e">at</span><span
class="crayon-h"> </span><span
class="crayon-e">port</span><span
class="crayon-h"> </span><span
class="crayon-sy">$</span><span
class="crayon-sy">{</span><span
class="crayon-v">port</span><span
class="crayon-sy">}</span><span
class="crayon-sy">`</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-14"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">resolve</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-15"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-16"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a3732709233-17"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a3732709233-18"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>Our Server currently does nothing but opening a port on 8000 and logging the info.</p><p>Let&#8217;s hook it up to our Application now:</p><p>5. Add the <strong>Server</strong> class to the resolution container:</p><p><em>File: <strong>app/container.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a5954670349" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import { Server } from './server.mjs'

container
  .register({
    server: awilix.asClass(Server, { lifetime: awilix.Lifetime.SINGLETON }),
  })</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a5954670349-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a5954670349-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913a5954670349-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a5954670349-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913a5954670349-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a5954670349-6">6</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a5954670349-1"><span
class="crayon-e">import</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">Server</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./server.mjs'</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a5954670349-2">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb913a5954670349-3"><span
class="crayon-i">container</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a5954670349-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-e">register</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913a5954670349-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">server</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-e">asClass</span><span
class="crayon-sy">(</span><span
class="crayon-v">Server</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-v">lifetime</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">awilix</span><span
class="crayon-sy">.</span><span
class="crayon-v">Lifetime</span><span
class="crayon-sy">.</span><span
class="crayon-i">SINGLETON</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a5954670349-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p>6.  Add this code to resolve the app and start the server:</p><p><em>File: <strong>index.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a6088750364" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import container from './app/container';
const app = container.resolve('app');

app
  .start()
  .catch((error) =&gt; {
    console.warn(error);
    process.exit();
  })</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a6088750364-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a6088750364-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913a6088750364-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a6088750364-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913a6088750364-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a6088750364-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913a6088750364-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a6088750364-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913a6088750364-9">9</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a6088750364-1"><span
class="crayon-e">import </span><span
class="crayon-e">container </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'./app/container'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a6088750364-2"><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">app</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">container</span><span
class="crayon-sy">.</span><span
class="crayon-e">resolve</span><span
class="crayon-sy">(</span><span
class="crayon-s">'app'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a6088750364-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a6088750364-4"><span
class="crayon-i">app</span></div><div
class="crayon-line" id="crayon-5e0935bb913a6088750364-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-e">start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a6088750364-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-st">catch</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">error</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913a6088750364-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">warn</span><span
class="crayon-sy">(</span><span
class="crayon-v">error</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a6088750364-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">process</span><span
class="crayon-sy">.</span><span
class="crayon-e">exit</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913a6088750364-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span></div></div></td></tr></table></div></div><p>7. Start the server to test that it runs:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a7912677590" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
node --experimental-modules index.mjs
[p 99922] Listening at port 8000</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a7912677590-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913a7912677590-2">2</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a7912677590-1"><span
class="crayon-v">node</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">experimental</span><span
class="crayon-o">-</span><span
class="crayon-e">modules </span><span
class="crayon-v">index</span><span
class="crayon-e">.mjs</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913a7912677590-2"><span
class="crayon-sy">[</span><span
class="crayon-i">p</span><span
class="crayon-h"> </span><span
class="crayon-cn">99922</span><span
class="crayon-sy">]</span><span
class="crayon-h"> </span><span
class="crayon-e">Listening </span><span
class="crayon-r">at</span><span
class="crayon-h"> </span><span
class="crayon-i">port</span><span
class="crayon-h"> </span><span
class="crayon-cn">8000</span></div></div></td></tr></table></div></div><p></p><h3>Adding Mustache.js</h3><p>Express.js does not have a template rendering engine by default. It is however very customizable and open to extensions. For the purposes of this example, we are going to use a very popular template engine for rendering our translations called <a
href="https://github.com/janl/mustache.js/" class="external" rel="nofollow" target="_blank">Mustache.js</a></p><p>1. Install Mustache and its helper.</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913a8103705786" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ npm install consolidate mustache --save</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913a8103705786-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913a8103705786-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">npm </span><span
class="crayon-e">install </span><span
class="crayon-e">consolidate </span><span
class="crayon-v">mustache</span><span
class="crayon-h"> </span><span
class="crayon-o">--</span><span
class="crayon-v">save</span></div></div></td></tr></table></div></div><p>2. Configure and add the rendering engine to our Server.js</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913aa717842266" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import express from 'express';
import consolidate from 'consolidate';

export class Server {
  constructor() {
    ...
    // setup mustache to parse .html files
    this.express.set('view engine', 'html');
    this.express.engine('html', consolidate.mustache);
  }
  ...
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913aa717842266-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913aa717842266-12">12</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-1"><span
class="crayon-e">import </span><span
class="crayon-e">express </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'express'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-2"><span
class="crayon-e">import </span><span
class="crayon-e">consolidate </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'consolidate'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-4"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">Server</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span></div><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-c">// setup mustache to parse .html files</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">set</span><span
class="crayon-sy">(</span><span
class="crayon-s">'view engine'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'html'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">engine</span><span
class="crayon-sy">(</span><span
class="crayon-s">'html'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">consolidate</span><span
class="crayon-sy">.</span><span
class="crayon-v">mustache</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-10"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb913aa717842266-11"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913aa717842266-12"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>Now we are ready to use our engine to render HTML pages with translatable strings. For that, we have the flexibility to use a middleware function that is supplied from the <em>i18n</em> library. This will inject its API into the <strong><em>req</em></strong> object as provided by the framework so we can use it without importing anything else.</p><p>1. Inject the <em>i18nProvider </em>in our server and add the middleware to the Express.js flow.</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913ab196086028" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
export class Server {
  constructor({i18nProvider}) {
    ...
    this.express.use(i18nProvider.init);
    this.express.get('/:name?', (req, res) =&gt; {
      const name = req.params.name;

      res.render('index', {
        'currentLocale': res.locale,
        'name': name || 'Theo',
        'hello': req.__('Hello'),
        'message': req.__('How are you?')
      });
    });
  }

  start() {
    return new Promise((resolve) =&gt; {
      const http = this.express.listen(8000, () =&gt; {
        const { port } = http.address();
        console.info(`[p ${process.pid}] Listening at port ${port}`);
        resolve();
      });
    });
  }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-15">15</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-16">16</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-17">17</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-18">18</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-19">19</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-20">20</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-21">21</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-22">22</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-23">23</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-24">24</div><div
class="crayon-num" data-line="crayon-5e0935bb913ab196086028-25">25</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ab196086028-26">26</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-1"><span
class="crayon-e">export</span><span
class="crayon-h"> </span><span
class="crayon-t">class</span><span
class="crayon-h"> </span><span
class="crayon-e">Server</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-2"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">constructor</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-3"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span><span
class="crayon-sy">.</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-st">use</span><span
class="crayon-sy">(</span><span
class="crayon-v">i18nProvider</span><span
class="crayon-sy">.</span><span
class="crayon-v">init</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">get</span><span
class="crayon-sy">(</span><span
class="crayon-s">'/:name?'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">name</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-v">params</span><span
class="crayon-sy">.</span><span
class="crayon-v">name</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-7">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-e">render</span><span
class="crayon-sy">(</span><span
class="crayon-s">'index'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'currentLocale'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-v">locale</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'name'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">name</span><span
class="crayon-h"> </span><span
class="crayon-o">||</span><span
class="crayon-h"> </span><span
class="crayon-s">'Theo'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-11"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'hello'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-s">'Hello'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-12"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'message'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-s">'How are you?'</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-13"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-14"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-15"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-16">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-17"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">start</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-18"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-r">new</span><span
class="crayon-h"> </span><span
class="crayon-e">Promise</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">resolve</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-19"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">http</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">listen</span><span
class="crayon-sy">(</span><span
class="crayon-cn">8000</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-20"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-h"> </span><span
class="crayon-i">port</span><span
class="crayon-h"> </span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">http</span><span
class="crayon-sy">.</span><span
class="crayon-e">address</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-21"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-v">console</span><span
class="crayon-sy">.</span><span
class="crayon-e">info</span><span
class="crayon-sy">(</span><span
class="crayon-sy">`</span><span
class="crayon-sy">[</span><span
class="crayon-e">p</span><span
class="crayon-h"> </span><span
class="crayon-sy">$</span><span
class="crayon-sy">{</span><span
class="crayon-v">process</span><span
class="crayon-sy">.</span><span
class="crayon-v">pid</span><span
class="crayon-sy">}</span><span
class="crayon-sy">]</span><span
class="crayon-h"> </span><span
class="crayon-e">Listening</span><span
class="crayon-h"> </span><span
class="crayon-e">at</span><span
class="crayon-h"> </span><span
class="crayon-e">port</span><span
class="crayon-h"> </span><span
class="crayon-sy">$</span><span
class="crayon-sy">{</span><span
class="crayon-v">port</span><span
class="crayon-sy">}</span><span
class="crayon-sy">`</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-22"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">resolve</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-23"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-24"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ab196086028-25"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ab196086028-26"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>2. Create our <em>index.html</em> view that will render when we visit the initial path:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913ac937833707" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
$ touch views/index.html</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913ac937833707-1">1</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913ac937833707-1"><span
class="crayon-sy">$</span><span
class="crayon-h"> </span><span
class="crayon-e">touch </span><span
class="crayon-v">views</span><span
class="crayon-o">/</span><span
class="crayon-v">index</span><span
class="crayon-sy">.</span><span
class="crayon-v">html</span></div></div></td></tr></table></div></div><p><em>File:<strong> views/index.html</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913ae985177674" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
&lt;!DOCTYPE html&gt;
&lt;html lang="{{currentLocale}}"&gt;
&lt;head&gt;
    &lt;title&gt;Node i18n&lt;/title&gt;
&lt;body&gt;
{{hello}} {{name}}&lt;br&gt;
{{message}}
&lt;/body&gt;
&lt;/html&gt;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913ae985177674-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ae985177674-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913ae985177674-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ae985177674-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913ae985177674-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ae985177674-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913ae985177674-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913ae985177674-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913ae985177674-9">9</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913ae985177674-1"><span
class="crayon-o">&lt;</span><span
class="crayon-o">!</span><span
class="crayon-e">DOCTYPE </span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ae985177674-2"><span
class="crayon-o">&lt;</span><span
class="crayon-e">html </span><span
class="crayon-v">lang</span><span
class="crayon-o">=</span><span
class="crayon-s">"{{currentLocale}}"</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ae985177674-3"><span
class="crayon-o">&lt;</span><span
class="crayon-e">head</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ae985177674-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span><span
class="crayon-e">Node</span><span
class="crayon-h"> </span><span
class="crayon-e">i18n</span><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ae985177674-5"><span
class="crayon-o">&lt;</span><span
class="crayon-e">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ae985177674-6"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">hello</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">name</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">br</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ae985177674-7"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">message</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913ae985177674-8"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913ae985177674-9"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div></div></td></tr></table></div></div><p>3. Run the server and navigate to<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913af511009945" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localhost</span><span
class="crayon-o">:</span><span
class="crayon-cn">8000</span><span
class="crayon-o">/</span></span></span>  or<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913b0852569077" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"> <span
class="crayon-v">localhost</span><span
class="crayon-o">:</span><span
class="crayon-cn">8000</span><span
class="crayon-o">/</span><span
class="crayon-o">:</span><span
class="crayon-v">param</span></span></span>  to see the following result:</p><p><img
src="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-16x8.png" class="alignnone size-medium wp-image-3718 lazy-image" data-src="https://phraseapp.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-300x146.png" alt="" width="300" height="146" data-srcset="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-300x146.png 300w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-16x8.png 16w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16.png 680w" sizes="(max-width: 300px) 100vw, 300px" /><noscript> <img
class="alignnone size-medium wp-image-3718" src="https://phraseapp.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-300x146.png" alt="" width="300" height="146" srcset="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-300x146.png 300w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16-16x8.png 16w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.11.16.png 680w" sizes="(max-width: 300px) 100vw, 300px" /></noscript></p><h3>Switching Locale</h3><p>On the practical side of things, the user of the applications ideally wants to change the locale from the UI. So the application needs to determine which is the current locale based on some client parameters. There are several ways to detect that preference. We can use a <em><strong>cookie</strong></em> that stores the current locale, a <em><strong>query</strong></em> parameter that requests a specific locale or an <em><strong>accept-language</strong></em> header that specifies which languages are which languages the client is able to understand, and which locale variant is preferred.</p><p>For the purposes of this tutorial, we are going to use a query parameter as it&#8217;s relatively easy to understand and implement.</p><p>We need to define a parameter that we will be using in order to determine the current locale setting. Let&#8217;s call it <em>lang. </em>Adding it to our app is relevantly simple.</p><p>1. Add the <em>lang</em> parameter to our <em>i18nProvider</em> object:</p><p><em>File:<strong> app/i18n.config.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913b2376949343" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
import i18n from 'i18n';
import path from 'path';

i18n.configure({
  locales: ['en', 'el'],
  defaultLocale: 'en',
  queryParameter: 'lang',
  directory: path.join('./', 'locales')
});

export default i18n;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b2376949343-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b2376949343-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b2376949343-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b2376949343-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b2376949343-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913b2376949343-11">11</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-1"><span
class="crayon-e">import </span><span
class="crayon-e">i18n </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'i18n'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b2376949343-2"><span
class="crayon-e">import </span><span
class="crayon-e">path </span><span
class="crayon-i">from</span><span
class="crayon-h"> </span><span
class="crayon-s">'path'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b2376949343-4"><span
class="crayon-v">i18n</span><span
class="crayon-sy">.</span><span
class="crayon-e">configure</span><span
class="crayon-sy">(</span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">locales</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">[</span><span
class="crayon-s">'en'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'el'</span><span
class="crayon-sy">]</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b2376949343-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">defaultLocale</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'en'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-7"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">queryParameter</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">'lang'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b2376949343-8"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">directory</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">path</span><span
class="crayon-sy">.</span><span
class="crayon-e">join</span><span
class="crayon-sy">(</span><span
class="crayon-s">'./'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-s">'locales'</span><span
class="crayon-sy">)</span></div><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-9"><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b2376949343-10">&nbsp;</div><div
class="crayon-line" id="crayon-5e0935bb913b2376949343-11"><span
class="crayon-e">export </span><span
class="crayon-st">default</span><span
class="crayon-h"> </span><span
class="crayon-v">i18n</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>2. Add the relevant translations for the target language:</p><p><em>File: <strong>locales/el.json</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913b3294775275" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
{
   "Hello": "Για Σας",
   "How are you?": "Πώς είστε?",
   "You have %s message": {
      "one": "'Έχεις %s μύνημα",
      "other": "'Έχεις %s μύνηματα"
   }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913b3294775275-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b3294775275-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913b3294775275-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b3294775275-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913b3294775275-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b3294775275-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913b3294775275-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b3294775275-8">8</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913b3294775275-1"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b3294775275-2"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"Hello"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Για Σας"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913b3294775275-3"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"How are you?"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Πώς είστε?"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b3294775275-4"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"You have %s message"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913b3294775275-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"one"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"'Έχεις %s μύνημα"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b3294775275-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"other"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"'Έχεις %s μύνηματα"</span></div><div
class="crayon-line" id="crayon-5e0935bb913b3294775275-7"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b3294775275-8"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>3. Start the Server and navigate to <link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913b4375149862" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localhost</span><span
class="crayon-o">:</span><span
class="crayon-cn">8000</span><span
class="crayon-o">/</span><span
class="crayon-sy">?</span><span
class="crayon-v">lang</span><span
class="crayon-o">=</span><span
class="crayon-v">el</span></span></span></p><h3><img
src="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-16x7.png" class="alignnone size-medium wp-image-3721 lazy-image" data-src="https://phraseapp.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-300x133.png" alt="" width="300" height="133" data-srcset="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-300x133.png 300w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-16x7.png 16w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09.png 704w" sizes="(max-width: 300px) 100vw, 300px" /><noscript> <img
class="alignnone size-medium wp-image-3721" src="https://phraseapp.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-300x133.png" alt="" width="300" height="133" srcset="https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-300x133.png 300w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09-16x7.png 16w, https://phrase.com/blog/wp-content/uploads/2018/02/Screen-Shot-2018-02-28-at-20.20.09.png 704w" sizes="(max-width: 300px) 100vw, 300px" /></noscript></h3><h3>Adding Template helpers</h3><p>If you don&#8217;t like adding the translation keys and values inside the application code you can include template helpers that parse the keys and automatically apply the translation value directly from the template files. Let&#8217;s see how can we do that using Mustache.</p><p>1. Add the following middleware function on our <strong>Server.mjs</strong> file:</p><p><em>File: <strong>app/Server.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913b5473923273" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
//https://github.com/janl/mustache.js#functions
this.express.use((req, res, next) =&gt; {
  // mustache helper
  res.locals.i18n = () =&gt; (text, render) =&gt; req.__(text, render);
  next();
});</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913b5473923273-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b5473923273-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913b5473923273-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b5473923273-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913b5473923273-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b5473923273-6">6</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913b5473923273-1"><span
class="crayon-c">//https://github.com/janl/mustache.js#functions</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b5473923273-2"><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-st">use</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">next</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913b5473923273-3"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">// mustache helper</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b5473923273-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-v">locals</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18n</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">text</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">render</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-v">text</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">render</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b5473923273-5"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">next</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b5473923273-6"><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>Here<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913b7682016641" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-v">locals</span></span></span> refers to all the functions available from our <strong>mustache.js</strong> engine. What we actually do is adding one more template helper for the <strong>i18n</strong> tag that will just call the <em><strong>req.__ </strong></em>method that is attached from the i18nProvider<em><strong> </strong></em>and by supplying the required parameters.</p><p>2. Add extra tags in our index.html file and test that the translations are happening:</p><p><em>File: <strong>views/index.html</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913b8657566549" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
&lt;!DOCTYPE html&gt;
&lt;html lang="{{currentLocale}}"&gt;
&lt;head&gt;
    &lt;title&gt;Node i18n&lt;/title&gt;
&lt;body&gt;
{{hello}} {{name}}&lt;br&gt;
{{message}}
&lt;div&gt;
    {{#i18n}}This is a translation helper{{/i18n}}
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913b8657566549-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b8657566549-12">12</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-1"><span
class="crayon-o">&lt;</span><span
class="crayon-o">!</span><span
class="crayon-e">DOCTYPE </span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-2"><span
class="crayon-o">&lt;</span><span
class="crayon-e">html </span><span
class="crayon-v">lang</span><span
class="crayon-o">=</span><span
class="crayon-s">"{{currentLocale}}"</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-3"><span
class="crayon-o">&lt;</span><span
class="crayon-e">head</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span><span
class="crayon-e">Node</span><span
class="crayon-h"> </span><span
class="crayon-e">i18n</span><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-5"><span
class="crayon-o">&lt;</span><span
class="crayon-e">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-6"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">hello</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">name</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">br</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-7"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">message</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-8"><span
class="crayon-o">&lt;</span><span
class="crayon-e">div</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-p">#i18n}}This is a translation helper{{/i18n}}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-10"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">div</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913b8657566549-11"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b8657566549-12"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div></div></td></tr></table></div></div><p><em>File: <strong>locales/el.json</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913b9018209685" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
{
   "Hello": "Για Σας",
   "How are you?": "Πώς είστε?",
   "You have %s message": {
      "one": "'Έχεις %s μύνημα",
      "other": "'Έχεις %s μύνηματα"
   },
   "This is a translation helper": "Αυτός είναι βοηθός μετάφρασης"
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913b9018209685-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b9018209685-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913b9018209685-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b9018209685-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913b9018209685-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b9018209685-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913b9018209685-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913b9018209685-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913b9018209685-9">9</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913b9018209685-1"><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b9018209685-2"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"Hello"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Για Σας"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913b9018209685-3"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"How are you?"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Πώς είστε?"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b9018209685-4"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"You have %s message"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913b9018209685-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"one"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"'Έχεις %s μύνημα"</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b9018209685-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">"other"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"'Έχεις %s μύνηματα"</span></div><div
class="crayon-line" id="crayon-5e0935bb913b9018209685-7"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-sy">}</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913b9018209685-8"><span
class="crayon-h">&nbsp;&nbsp; </span><span
class="crayon-s">"This is a translation helper"</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-s">"Αυτός είναι βοηθός μετάφρασης"</span></div><div
class="crayon-line" id="crayon-5e0935bb913b9018209685-9"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p><img
src="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-16x8.png" class="alignnone size-medium wp-image-3728 lazy-image" data-src="https://phraseapp.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-300x156.png" alt="" width="300" height="156" data-srcset="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-300x156.png 300w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-16x8.png 16w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19.png 654w" sizes="(max-width: 300px) 100vw, 300px" /><noscript> <img
class="alignnone size-medium wp-image-3728" src="https://phraseapp.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-300x156.png" alt="" width="300" height="156" srcset="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-300x156.png 300w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19-16x8.png 16w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-14.55.19.png 654w" sizes="(max-width: 300px) 100vw, 300px" /></noscript></p><p>Now in order to support plural translations using template helpers, we need to provide a different function that will accept 2 tags, one for the message key and one for the count:</p><p><em>File: <strong>views/index.html</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913bb236126762" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
&lt;!DOCTYPE html&gt;
&lt;html lang="{{currentLocale}}"&gt;
&lt;head&gt;
    &lt;title&gt;Node i18n&lt;/title&gt;
&lt;body&gt;
{{hello}} {{name}}&lt;br&gt;
{{message}}
&lt;div&gt;
    {{#i18n}}This is a translation helper,{{/i18n}}&lt;br&gt;
    {{#i18np}}You have %s message,{{messageCount}}{{/i18np}}
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bb236126762-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb913bb236126762-13">13</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-1"><span
class="crayon-o">&lt;</span><span
class="crayon-o">!</span><span
class="crayon-e">DOCTYPE </span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-2"><span
class="crayon-o">&lt;</span><span
class="crayon-e">html </span><span
class="crayon-v">lang</span><span
class="crayon-o">=</span><span
class="crayon-s">"{{currentLocale}}"</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-3"><span
class="crayon-o">&lt;</span><span
class="crayon-e">head</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span><span
class="crayon-e">Node</span><span
class="crayon-h"> </span><span
class="crayon-e">i18n</span><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-e">title</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-5"><span
class="crayon-o">&lt;</span><span
class="crayon-e">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-6"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">hello</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">name</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span><span
class="crayon-o">&lt;</span><span
class="crayon-e">br</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-7"><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-v">message</span><span
class="crayon-sy">}</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-8"><span
class="crayon-o">&lt;</span><span
class="crayon-e">div</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-p">#i18n}}This is a translation helper,{{/i18n}}&lt;br&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">{</span><span
class="crayon-sy">{</span><span
class="crayon-p">#i18np}}You have %s message,{{messageCount}}{{/i18np}}</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-11"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">div</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bb236126762-12"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">body</span><span
class="crayon-o">&gt;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bb236126762-13"><span
class="crayon-o">&lt;</span><span
class="crayon-o">/</span><span
class="crayon-v">html</span><span
class="crayon-o">&gt;</span></div></div></td></tr></table></div></div><p><em>File: <strong>app/Server.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913bc435231323" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
this.express.use((req, res, next) =&gt; {
  // mustache helper
  res.locals.i18np = () =&gt; (text, render) =&gt; {
    const parts = text.split(',');
    if (parts.length &gt; 1) {
      const renderedCount = render(parts[1]);
      return req.__n(parts[0], renderedCount, render)
    }
  };
  next();
});</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bc435231323-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bc435231323-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bc435231323-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bc435231323-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bc435231323-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913bc435231323-11">11</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-1"><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-st">use</span><span
class="crayon-sy">(</span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">next</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bc435231323-2"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-c">// mustache helper</span></div><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-3"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-v">locals</span><span
class="crayon-sy">.</span><span
class="crayon-v">i18np</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">text</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">render</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bc435231323-4"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">parts</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">text</span><span
class="crayon-sy">.</span><span
class="crayon-e">split</span><span
class="crayon-sy">(</span><span
class="crayon-s">','</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">if</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">parts</span><span
class="crayon-sy">.</span><span
class="crayon-v">length</span><span
class="crayon-h"> </span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-cn">1</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bc435231323-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">renderedCount</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-e">render</span><span
class="crayon-sy">(</span><span
class="crayon-v">parts</span><span
class="crayon-sy">[</span><span
class="crayon-cn">1</span><span
class="crayon-sy">]</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__n</span><span
class="crayon-sy">(</span><span
class="crayon-v">parts</span><span
class="crayon-sy">[</span><span
class="crayon-cn">0</span><span
class="crayon-sy">]</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">renderedCount</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">render</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bc435231323-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-9"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bc435231323-10"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-e">next</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bc435231323-11"><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>In that case, we use the <strong>render</strong> method supplied from mustache to find the replace the correct count from our data store. Just don&#8217;t forget to add this key to our response variables:</p><p><em>File: <strong>app/server.mjs</strong></em></p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913bd571243576" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
this.express.get('/:name?', (req, res) =&gt; {
  const name = req.params.name;

  res.render('index', {
    'currentLocale': res.locale,
    'name': name || 'Theo',
    'hello': req.__('Hello'),
    &lt;strong&gt;'&lt;/strong&gt;messageCount': 5,
    'message': req.__('How are you?')
  });
});</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bd571243576-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bd571243576-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bd571243576-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bd571243576-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913bd571243576-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913bd571243576-11">11</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-1"><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-v">express</span><span
class="crayon-sy">.</span><span
class="crayon-e">get</span><span
class="crayon-sy">(</span><span
class="crayon-s">'/:name?'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bd571243576-2"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">name</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-v">params</span><span
class="crayon-sy">.</span><span
class="crayon-v">name</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-3">&nbsp;</div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bd571243576-4"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-e">render</span><span
class="crayon-sy">(</span><span
class="crayon-s">'index'</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-5"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'currentLocale'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">.</span><span
class="crayon-v">locale</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bd571243576-6"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'name'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">name</span><span
class="crayon-h"> </span><span
class="crayon-o">||</span><span
class="crayon-h"> </span><span
class="crayon-s">'Theo'</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'hello'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-s">'Hello'</span><span
class="crayon-sy">)</span><span
class="crayon-sy">,</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bd571243576-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-o">&lt;</span><span
class="crayon-v">strong</span><span
class="crayon-o">&gt;</span><span
class="crayon-s">'&lt;/strong&gt;messageCount'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-cn">5</span><span
class="crayon-sy">,</span></div><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-s">'message'</span><span
class="crayon-o">:</span><span
class="crayon-h"> </span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-e">__</span><span
class="crayon-sy">(</span><span
class="crayon-s">'How are you?'</span><span
class="crayon-sy">)</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913bd571243576-10"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913bd571243576-11"><span
class="crayon-sy">}</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div></div></td></tr></table></div></div><p>Run again the app to see the result:</p><p><img
src="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-16x9.png" class="alignnone size-medium wp-image-3730 lazy-image" data-src="https://phraseapp.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-300x167.png" alt="" width="300" height="167" data-srcset="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-300x167.png 300w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-16x9.png 16w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23.png 668w" sizes="(max-width: 300px) 100vw, 300px" /><noscript> <img
class="alignnone size-medium wp-image-3730" src="https://phraseapp.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-300x167.png" alt="" width="300" height="167" srcset="https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-300x167.png 300w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23-16x9.png 16w, https://phrase.com/blog/wp-content/uploads/2018/03/Screen-Shot-2018-03-01-at-15.19.23.png 668w" sizes="(max-width: 300px) 100vw, 300px" /></noscript></p><p>&nbsp;</p><p>&nbsp;</p><h3>Using our own locale middleware to change language</h3><p>If you are interested in using our<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913be644787272" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localeService</span></span></span> object to detect and set the current locale based on the query parameter then you only have to add the following middleware method to our <strong>LocaleService</strong> class:</p><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><div
id="crayon-5e0935bb913c0710131254" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 19px !important;">
/**
 *
 * @returns {Function} A middleware function to use with Web Frameworks.
 */
getMiddleWare() {
  return (req, res, next) =&gt; {
    const queryParameter = 'lang';
    if (req.url) {
      const urlObj = url.parse(req.url, true);
      if (urlObj.query[queryParameter]) {
        const language = urlObj.query[queryParameter].toLowerCase();
        this.setLocale(language);
      }
    }
    next();
  }
}</textarea></div><div
class="crayon-main" style=""><table
class="crayon-table"><tr
class="crayon-row"><td
class="crayon-nums " data-settings="show"><div
class="crayon-nums-content" style="font-size: 12px !important; line-height: 19px !important;"><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-1">1</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-2">2</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-3">3</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-4">4</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-5">5</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-6">6</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-7">7</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-8">8</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-9">9</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-10">10</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-11">11</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-12">12</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-13">13</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-14">14</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-15">15</div><div
class="crayon-num crayon-striped-num" data-line="crayon-5e0935bb913c0710131254-16">16</div><div
class="crayon-num" data-line="crayon-5e0935bb913c0710131254-17">17</div></div></td><td
class="crayon-code"><div
class="crayon-pre" style="font-size: 12px !important; line-height: 19px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-1"><span
class="crayon-c">/**</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-2"><span
class="crayon-c"> *</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-3"><span
class="crayon-c"> * @returns {Function} A middleware function to use with Web Frameworks.</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-4"><span
class="crayon-c"> */</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-5"><span
class="crayon-e">getMiddleWare</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-6"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-st">return</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">res</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-v">next</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-o">&gt;</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-7"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">queryParameter</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-s">'lang'</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-8"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">if</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-v">url</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-9"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">urlObj</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">url</span><span
class="crayon-sy">.</span><span
class="crayon-e">parse</span><span
class="crayon-sy">(</span><span
class="crayon-v">req</span><span
class="crayon-sy">.</span><span
class="crayon-v">url</span><span
class="crayon-sy">,</span><span
class="crayon-h"> </span><span
class="crayon-t">true</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-10"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-st">if</span><span
class="crayon-h"> </span><span
class="crayon-sy">(</span><span
class="crayon-v">urlObj</span><span
class="crayon-sy">.</span><span
class="crayon-v">query</span><span
class="crayon-sy">[</span><span
class="crayon-v">queryParameter</span><span
class="crayon-sy">]</span><span
class="crayon-sy">)</span><span
class="crayon-h"> </span><span
class="crayon-sy">{</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-11"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-m">const</span><span
class="crayon-h"> </span><span
class="crayon-v">language</span><span
class="crayon-h"> </span><span
class="crayon-o">=</span><span
class="crayon-h"> </span><span
class="crayon-v">urlObj</span><span
class="crayon-sy">.</span><span
class="crayon-v">query</span><span
class="crayon-sy">[</span><span
class="crayon-v">queryParameter</span><span
class="crayon-sy">]</span><span
class="crayon-sy">.</span><span
class="crayon-e">toLowerCase</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-12"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-r">this</span><span
class="crayon-sy">.</span><span
class="crayon-e">setLocale</span><span
class="crayon-sy">(</span><span
class="crayon-v">language</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-13"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-14"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-15"><span
class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class="crayon-e">next</span><span
class="crayon-sy">(</span><span
class="crayon-sy">)</span><span
class="crayon-sy">;</span></div><div
class="crayon-line crayon-striped-line" id="crayon-5e0935bb913c0710131254-16"><span
class="crayon-h">&nbsp;&nbsp;</span><span
class="crayon-sy">}</span></div><div
class="crayon-line" id="crayon-5e0935bb913c0710131254-17"><span
class="crayon-sy">}</span></div></div></td></tr></table></div></div><p>That way we can re-use our localeService object without cross-referencing other libraries.</p><p>I leave as an exercise for the reader the replacement of the calls to translate the strings using our<link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css" /><link
rel="stylesheet" type="text/css" href="https://phrase.com/blog/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css" /><span
id="crayon-5e0935bb913c1958719624" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important;"><span
class="crayon-pre crayon-code" style="font-size: 12px !important; line-height: 19px !important;font-size: 12px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><span
class="crayon-v">localeService</span></span></span>  object instead of the <strong>req</strong> object in our Server.mjs file.</p><h2>Phrase</h2><p>Phrase supports many different languages and frameworks, including Node.js and Javascript. It allows to easily import and export translations data and search for any missing translations, which is really convenient. On top of that, you can collaborate with translators as it is much better to have <a
href="https://phrase.com/blog/posts/translation-management-why-authentic-human-translation-is-still-essential-for-localizing-software/">professionally done localization</a> for your website. If you’d like to learn more about Phrase, refer to the <a
href="https://help.phrase.com/en/articles/2180430" target="_blank" rel="noopener">Getting Started guide</a>. You can also get a <a
href="https://app.phrase.com/signup">14-day trial</a>. So what are you waiting for?</p><h2>Conclusion</h2><p>This article made a valiant attempt to describe in detail the steps required in order to add i18n to your Node.js application. I hope you enjoyed the article and that it helped you understand what is required to localize Node.js apps.</p><p>This is by no means an exhaustive guide as every application has different needs and scope requirements. Please stay put for more detailed articles regarding this subject.</p></div><hr
class="entry-info-separator"><div
class="entry-meta"> Published on <time
class="published" itemprop="datePublished" content="2018-03-08T18:51:38+00:00" datetime="2018-03-08T18:51:38+00:00"> March 8th, 2018 </time> by <a
href="https://phrase.com/blog/posts/author/theo/">Theo</a>.
Last updated on <time
class="updated" itemprop="dateModified" content="2019-08-21T16:18:42+00:00" datetime="2019-08-21T16:18:42+00:00"> August 21st, 2019 </time>.</div><div
class="entry-rating"><div
class="kk-star-ratings  top-left lft" data-id="3491"><div
class="kksr-stars kksr-star gray"><div
class="kksr-fuel kksr-star yellow" style="width:0%;"></div> <a
href="#1"></a><a
href="#2"></a><a
href="#3"></a><a
href="#4"></a><a
href="#5"></a></div><div
class="kksr-legend"><div
itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating"><div
itemprop="name" class="kksr-title">The Ultimate Guide: Node.js Internationalization (I18n)</div><span
itemprop="ratingValue">4.9</span> (98.33%) <span
itemprop="ratingCount">12</span> votes<meta
itemprop="bestRating" content="5"/><meta
itemprop="worstRating" content="1"/><div
itemprop="itemReviewed" itemscope itemtype="http://schema.org/CreativeWork"></div></div></div></div></div><div
class="new-author"><h5 class="new-author__heading">Author</h5><div
class="new-author__image"> <a
href="https://phrase.com/blog/posts/author/theo/"> <img
src="https://phrase.com/blog/wp-content/uploads/2019/05/Theo-150x150.png" width="96" height="96" alt="Theo Despoudis" class="avatar avatar-96 wp-user-avatar wp-user-avatar-96 alignnone photo" /> </a></div><span
class="new-author__name" itemprop="name"> <a
href="https://phrase.com/blog/posts/author/theo/"> Theo </a> </span><span
class="new-author__position"> Phrase Content Team </span></div><div
class="entry-comments"><h5 class="seo-h2-headline">Comments</h5><div
id="disqus_thread"></div></div></div><div
class="col-md-4 sidebar-wrapper"><div
class="row sidebar"><div
class="sidebar-inner-sticky"><div
class="col-12"><div
class="guide-box"><h5 class="guide-box__heading">The Ultimate Guide to Localization Management</h5><p
class="guide-box__content">Find out all you need to know about localization from start to finish with our ultimate guide</p> <a
class="guide-box__link" href="https://phrase.com/lp/localization-management?utm_campaign=landingpage-linkbox&utm_medium=blog&utm_source=post">Check out the guide</a></div></div><div
class="col-12 sidebar-section-wrapper"><div
class="sidebar-section sidebar-section-clear popular-posts"><div
class="tptn_posts "><h5 class="sidebar-section-head">Popular posts</h5><div
id="top-10-carousel" class="carousel slide"><div
class="carousel-inner"><div
class="carousel-item"><div
class="carousel-item-content"><a
href="https://phrase.com/blog/posts/10-must-read-blogs-for-software-developer/"     class="tptn_link"><img
src="https://phrase.com/blog/wp-content/uploads/2016/10/Lyst-291x196.png" alt="10 Must-Read Software Development Blogs" title="10 Must-Read Software Development Blogs" width="291" height="196" class="tptn_thumb tptn_featured" /></a><span
class="tptn_after_thumb"><a
href="https://phrase.com/blog/posts/10-must-read-blogs-for-software-developer/"     class="tptn_link"><span
class="tptn_title">10 Must-Read Software Development Blogs</span></a></span></div></div><div
class="carousel-item"><div
class="carousel-item-content"><a
href="https://phrase.com/blog/posts/react-i18n-best-libraries/"     class="tptn_link"><img
src="https://phrase.com/blog/wp-content/uploads/2018/01/Best-Libraries-for-React-I18n-291x196.jpg" alt="Best Libraries for React I18n" title="Best Libraries for React I18n" width="291" height="196" class="tptn_thumb tptn_featured" /></a><span
class="tptn_after_thumb"><a
href="https://phrase.com/blog/posts/react-i18n-best-libraries/"     class="tptn_link"><span
class="tptn_title">Best Libraries for React I18n</span></a></span></div></div><div
class="carousel-item"><div
class="carousel-item-content"><a
href="https://phrase.com/blog/posts/step-step-guide-javascript-localization/"     class="tptn_link"><img
src="https://phrase.com/blog/wp-content/uploads/2016/09/A-complete-guide-to-javascript-localization-291x196.jpg" alt="A Step-by-Step Guide to JavaScript Localization" title="A Step-by-Step Guide to JavaScript Localization" width="291" height="196" class="tptn_thumb tptn_featured" /></a><span
class="tptn_after_thumb"><a
href="https://phrase.com/blog/posts/step-step-guide-javascript-localization/"     class="tptn_link"><span
class="tptn_title">A Step-by-Step Guide to JavaScript Localization</span></a></span></div></div><div
class="carousel-item"><div
class="carousel-item-content"><a
href="https://phrase.com/blog/posts/node-js-i18n-guide/"     class="tptn_link"><img
src="https://phrase.com/blog/wp-content/uploads/2018/03/nodejs-i18n-291x196.jpg" alt="The Ultimate Guide: Node.js Internationalization (I18n)" title="The Ultimate Guide: Node.js Internationalization (I18n)" width="291" height="196" class="tptn_thumb tptn_featured" /></a><span
class="tptn_after_thumb"><a
href="https://phrase.com/blog/posts/node-js-i18n-guide/"     class="tptn_link"><span
class="tptn_title">The Ultimate Guide: Node.js Internationalization (I18n)</span></a></span></div></div><div
class="carousel-item"><div
class="carousel-item-content"><a
href="https://phrase.com/blog/posts/symfony-4-i18n/"     class="tptn_link"><img
src="https://phrase.com/blog/wp-content/uploads/2018/07/symfony-i18n-tutorial-291x196.jpg" alt="The Ultimate Symfony Tutorial on Internationalization" title="The Ultimate Symfony Tutorial on Internationalization" width="291" height="196" class="tptn_thumb tptn_featured" /></a><span
class="tptn_after_thumb"><a
href="https://phrase.com/blog/posts/symfony-4-i18n/"     class="tptn_link"><span
class="tptn_title">The Ultimate Symfony Tutorial on Internationalization</span></a></span></div></div></div></div><div
class="tptn_clear"></div></div> <script>var carousel = document.getElementById("top-10-carousel");

      if (carousel) {
        carousel.dataset.ride = "carousel";
        carousel.dataset.interval = "10000";

        var firstCarouselItem = carousel.firstChild.childNodes[0];

        if (firstCarouselItem) {
          firstCarouselItem.classList.add("active");
        }
      }</script> </div></div><div
class="col-12 sidebar-section-wrapper"><div
class="sidebar-section sidebar-section-opaque newsletter-signup"><h5 class="sidebar-section-head">Stay in the Know</h5><p>Subscribe to our mailing list to keep up with best practices for localization, new features, and updates from Phrase.</p><p
class="action"> <a
href="https://hs.phrase.com/on/subscribe-for-updates" class="btn btn-success" target="_blank">Join Now</a></p></div></div></div></div></div></div></div></article><div
id="footer" class="hidden-print"><div
class="container-fluid newsletter-optin-footer"><div
class="container"><div
class="row"><div
class="col-12 col-md newsletter-optin-footer-text"><h6>Watch our Free Webinars</h6><p>Get tips on how to optimize your localization workflow and learn all about the newest Phrase features.</p></div><div
class="align-items-center col-12 col-md-auto d-flex justify-content-center"> <a
href="https://phrase.com/lp/webinars/" class="btn btn-success" target="_blank">Watch free Webinars</a></div></div></div></div><div
class="container-fluid footer__section footer-links"><div
class="container"><div
class="row"><div
class="col-6 col-md-3"><h4>Product Information</h4><ul
class="nav flex-column"><li
class="nav-item"><a
class="nav-link footer-links__link" href="/">Home</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/features/">Features</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/customers/">Customers</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/pricing/">Pricing</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/demo/">Demo</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="https://developers.phrase.com/api/">API</a></li></ul></div><div
class="col-6 col-md-3"><h4>Company</h4><ul
class="nav flex-column"><li
class="nav-item"><a
class="nav-link footer-links__link" href="/about/">About us</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="https://phrase.com/blog/" target="_blank">Blog</a></li><li
class="nav-item"> <a
class="nav-link footer-links__link" href="/careers/"> Careers <span
class="badge badge-primary footer-links__badge"> We're hiring!</span> </a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/press/">Press</a></li></ul></div><div
class="col-6 col-md-3"><h4>Support</h4><ul
class="nav flex-column"><li
class="nav-item"><a
class="nav-link footer-links__link" href="/contact/">Contact</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="/docs/">Documentation</a></li><li
class="nav-item"><a
class="nav-link footer-links__link" href="https://status.phrase.com/" rel="nofollow" target="_blank">Service Status</a></li></ul></div><div
class="col-6 col-md-3"><h4>Our Solutions</h4><div
class="dropup"> <button
type="button" class="btn btn-light dropdown-toggle footer-links__dropup" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Solutions <span
class="sr-only">Toggle Dropdown</span> </button><ul
class="dropdown-menu dropdown-menu-right"><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/android-localization/" tabindex="-1">Android Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/android-translation/" tabindex="-1">Android Translation</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/angular-internationalization/" tabindex="-1">Angular Internationalization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/angularjs-localization/" tabindex="-1">AngularJS Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/angular-js/" tabindex="-1">AngularJS</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/app-localization/" tabindex="-1">App Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/app-translation/" tabindex="-1">App Translation</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/django-localization/" tabindex="-1">Django Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/ebook-why-is-localization-so-hard/" tabindex="-1">Ebook – Best Practices for Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/putting-together-l10n-team/" tabindex="-1">Ebook – Putting Together a Solid Localization Team</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/roi-for-l10n/" tabindex="-1">Ebook – Raise Your ROI for Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/ebook-continuous-localization/" tabindex="-1">Ebook – Your Guide to Continuous Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/hello-world/" tabindex="-1">Hello World Conference</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/i18n-manager/" tabindex="-1">I18n Manager</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/i18n/" tabindex="-1">i18n</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/infographic-biggest-mistakes-in-localization/" tabindex="-1">Infographic – Biggest Mistakes in Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/infographic-building-global-growth-strategy/" tabindex="-1">Infographic – Building a Global Growth Strategy</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/how-tms-work/" tabindex="-1">Infographic – How TMS Work</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/infographic-ideal-l10n-workflow/" tabindex="-1">Infographic – The Ideal Localization Workflow</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/ios-localization/" tabindex="-1">iOS Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/laravel-localization/" tabindex="-1">Laravel Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/localization-management/" tabindex="-1">Localization Management</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/localization-services/" tabindex="-1">Localization Services</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/mobile-app-localization/" tabindex="-1">Mobile App Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/freeplan/" tabindex="-1">Phrase Free Plan</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/partner-program/" tabindex="-1">Phrase Partner Program</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/react-localization/" tabindex="-1">React Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/sketch_pm/" tabindex="-1">Sketch Plugin</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/software-internationalization/" tabindex="-1">Software Internationalization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/software-localization/" tabindex="-1">Software Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/software-translation/" tabindex="-1">Software Translation</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/symfony-translation/" tabindex="-1">Symfony Translation</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/translation-app/" tabindex="-1">Translation App</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/translation-management-system/" tabindex="-1">Translation Management System</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/translation-management/" tabindex="-1">Translation Management</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/web-localization/" tabindex="-1">Web Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/website-internationalization/" tabindex="-1">Website Internationalization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/website-localization/" tabindex="-1">Website Localization</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/website-translation/" tabindex="-1">Website Translation</a></li><li
class="dropdown-menu__list"><a
class="dropdown-item footer-links__ddi" href="https://phrase.com/lp/what-is-software-translation/" tabindex="-1">What Is Software Translation</a></li></ul></div></div></div></div></div><div
class="container-fluid footer__section legal-info"><div
class="container"><div
class="row"><div
class="col-12 col-sm-2 mb-4 mb-sm-0 d-flex justify-content-center justify-content-sm-start align-items-center"> <a
href="https://phrase.com"> <img
class="legal-info__icon" src="https://phrase.com/blog/wp-content/themes/wp-phraseapp-theme-2.5.40/dist/images/pa-parrot.89be7871869bd952a389d169e93ffefe.svg" alt="Phrase Parrot Icon"> </a></div><div
class="col-12 col-sm-10 d-flex flex-column flex-sm-row justify-content-center justify-content-sm-end align-items-center"><ul
class="nav justify-content-end mb-1 mb-sm-0"><li
class="nav-item" data-gdpr="preferences"></li><li
class="nav-item"> <a
class="nav-link legal-info__link" href="https://phrase.com/terms/">Terms</a></li><li
class="nav-item"> <a
class="nav-link legal-info__link" href="https://phrase.com/privacy/">Privacy</a></li><li
class="nav-item"> <a
class="nav-link legal-info__link" href="https://phrase.com/imprint/">Imprint</a></li></ul><ul
class="nav"><li
class="nav-item"> <a
class="nav-link legal-info__link" target="_blank" rel="nofollow" href="https://www.facebook.com/phraseapp/"> <img
height="12" src="https://phrase.com/blog/wp-content/themes/wp-phraseapp-theme-2.5.40/dist/images/facebook.76b55d13df4d9d5f41a87449b30b2f7c.png" alt="Facebook"> </a></li><li
class="nav-item"> <a
class="nav-link legal-info__link" target="_blank" rel="nofollow" href="https://twitter.com/phraseapp/"> <img
height="12" src="https://phrase.com/blog/wp-content/themes/wp-phraseapp-theme-2.5.40/dist/images/twitter.73e9110cdd28f7fb70cabb4226c4a861.png" alt="Twitter"> </a></li></ul></div></div></div></div></div> <noscript><iframe
src="https://www.googletagmanager.com/ns.html?id=GTM-K85N4R"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div
style="display:none"><div
class="grofile-hash-map-314c9f734b04106c3d6169547d517e40"></div></div><link
rel='stylesheet' id='fvm-footer-0-css'  href='//phrase.com/blog/wp-content/uploads/fvm/out/footer-eadf0b30-1572863800.min.css' type='text/css' media='all' /> <script type='text/javascript'>/*  */
var DavesWordPressLiveSearchConfig = {"resultsDirection":"down","showThumbs":"true","showExcerpt":"true","showMoreResultsLink":"true","minCharsToSearch":"3","xOffset":"-58","yOffset":"0","blogURL":"https:\/\/phrase.com\/blog","ajaxURL":"https:\/\/phrase.com\/blog\/wp-admin\/admin-ajax.php","viewMoreText":"View more results","outdatedJQuery":"Dave's WordPress Live Search requires jQuery 1.2.6 or higher. WordPress ships with current jQuery versions. But if you are seeing this message, it's likely that another plugin is including an earlier version.","resultTemplate":"<ul id=\"dwls_search_results\" class=\"search_results dwls_search_results\" role=\"presentation\" aria-hidden=\"true\">\n<input type=\"hidden\" name=\"query\" value=\"<%- resultsSearchTerm %>\" \/>\n<% _.each(searchResults, function(searchResult, index, list) { %>\n        <%\n        \/\/ Thumbnails\n        if(DavesWordPressLiveSearchConfig.showThumbs == \"true\" && searchResult.attachment_thumbnail) {\n                liClass = \"post_with_thumb\";\n        }\n        else {\n                liClass = \"\";\n        }\n        %>\n        <li class=\"daves-wordpress-live-search_result <%- liClass %> '\">\n        <% if(DavesWordPressLiveSearchConfig.showThumbs == \"true\" && searchResult.attachment_thumbnail) { %>\n                <img src=\"<%= searchResult.attachment_thumbnail %>\" class=\"post_thumb\" \/>\n        <% } %>\n\n        <a href=\"<%= searchResult.permalink %>\" class=\"daves-wordpress-live-search_title\"><%= searchResult.post_title %><\/a>\n\n        <% if(searchResult.post_price !== undefined) { %>\n                <p class=\"price\"><%- searchResult.post_price %><\/p>\n        <% } %>\n\n        <% if(DavesWordPressLiveSearchConfig.showExcerpt == \"true\" && searchResult.post_excerpt) { %>\n                <p class=\"excerpt clearfix\"><%= searchResult.post_excerpt %><\/p>\n        <% } %>\n\n        <% if(e.displayPostMeta) { %>\n                <p class=\"meta clearfix daves-wordpress-live-search_author\" id=\"daves-wordpress-live-search_author\">Posted by <%- searchResult.post_author_nicename %><\/p><p id=\"daves-wordpress-live-search_date\" class=\"meta clearfix daves-wordpress-live-search_date\"><%- searchResult.post_date %><\/p>\n        <% } %>\n        <div class=\"clearfix\"><\/div><\/li>\n<% }); %>\n\n<% if(searchResults[0].show_more !== undefined && searchResults[0].show_more && DavesWordPressLiveSearchConfig.showMoreResultsLink == \"true\") { %>\n        <div class=\"clearfix search_footer\"><a href=\"<%= DavesWordPressLiveSearchConfig.blogURL %>\/?s=<%-  resultsSearchTerm %>\"><%- DavesWordPressLiveSearchConfig.viewMoreText %><\/a><\/div>\n<% } %>\n\n<\/ul>"};
var countVars = {"disqusShortname":"phraseapp"};
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.16"},"disqusIdentifier":"3491 https:\/\/phraseapp.com\/blog\/?p=3491","disqusShortname":"phraseapp","disqusTitle":"The Ultimate Guide: Node.js Internationalization (I18n)","disqusUrl":"https:\/\/phrase.com\/blog\/posts\/node-js-i18n-guide\/","postId":"3491"};
/*  */</script> <script type="text/javascript" src="//phrase.com/blog/wp-content/uploads/fvm/out/footer-cf461fc5-1572863800.min.js" defer></script><script type="text/javascript" src="https://s0.wp.com/wp-content/js/devicepx-jetpack.js" defer></script><script type='text/javascript'>/*  */
var leadin_wordpress = {"userRole":"visitor","pageType":"post","leadinPluginVersion":"7.15.11"};
/*  */</script> <script async defer id="hs-script-loader" type="text/javascript" src="//js.hs-scripts.com/584311.js?integration=WordPress" defer></script><script type='text/javascript'>/*  */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/phrase.com\/blog\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/*  */</script> <script type="text/javascript" src="//phrase.com/blog/wp-content/uploads/fvm/out/footer-3c5006da-1572863800.min.js" defer></script><script type='text/javascript' src='https://stats.wp.com/e-201952.js' async='async' defer='defer'></script> <script type='text/javascript'>_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:6.5.1',blog:'119001307',post:'3491',tz:'2',srv:'phrase.com'} ]);
	_stq.push([ 'clickTrackerInit', '119001307', '3491' ]);</script> <noscript><link
href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i" rel="stylesheet" /><link
href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" /> </noscript> <script type="application/javascript">var APP_ID = "pg11k19f";

  window.intercomSettings = {
    app_id: APP_ID
  };

  (function() {
    var w = window;
    var ic = w.Intercom;

    if (typeof ic === "function") {
      ic('reattach_activator');
      ic('update', intercomSettings);
    } else {
      var d = document;
      var i = function() {
        i.c(arguments)
      };
      i.q = [];
      i.c = function(args) {
        i.q.push(args)
      };
      w.Intercom = i;

      function l() {
        var s = d.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'https://widget.intercom.io/widget/' + APP_ID;
        var x = d.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
      }
      if (w.attachEvent) {
        w.attachEvent('onload', l);
      } else {
        w.addEventListener('load', l, false);
      }
    }
  })();</script> </body></html>